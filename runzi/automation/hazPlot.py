import matplotlib.pyplot as plt
import numpy as np


# expects data as an array of x,y pairs
def plotHazardCurve(tabData, years, title, subtitle, fileName):
    curveData = np.transpose(tabData)
    fig, ax = plt.subplots(1)

    ax.loglog(curveData[0], curveData[1])
    ax.set_xscale('log', base=10)
    ax.set_yscale('log', base=10)

    yticks = [0.000001, 0.00001, 0.0001, 0.001, 0.01, 0.1, 1]
    ylabels = ['0.000001', '0.00001', '0.0001', '0.001', '0.01', '0.1', '1']
    ax.set_yticks(yticks)
    ax.set_yticklabels(ylabels)
    ax.set_ylabel('PoE (' + str(years) + 'yr)')

    xticks = [0.0001, 0.001, 0.01, 0.1, 1, 10]

    ax.set_xticks(xticks)
    ax.set_xticklabels(xticks)
    ax.set_xlabel('PGA (g)')

    ax.set_title(title + '\n' + subtitle)

    ax.grid()
    fig.tight_layout()
    plt.savefig(fileName)


# for testing, remove this
# testData = [[1.0000000000000009E-4, 0.8843196134807575], [1.299999999999999E-4, 0.8843196134781077], [1.6E-4, 0.8843196134646844], [1.9999999999999985E-4, 0.8843196133839439], [2.5E-4, 0.8843196129410242], [3.200000000000001E-4, 0.8843196101558626], [4.000000000000001E-4, 0.8843195975672733], [5.000000000000001E-4, 0.8843195429684357], [6.299999999999998E-4, 0.8843193105133085], [7.899999999999998E-4, 0.8843184528397783], [0.0010000000000000002, 0.8843153151817564], [0.0012599999999999996, 0.8843054158586937], [0.0015799999999999998, 0.8842775679022021], [0.0020000000000000005, 0.8842002247246875], [0.0025100000000000005, 0.8840189541241973], [0.00316, 0.8836112072723925], [0.003979999999999999, 0.882771155577409], [0.005009999999999998, 0.8811762003027971], [0.006310000000000001, 0.8783423039660107], [0.007940000000000003, 0.873652690300889], [0.010000000000000004, 0.8662597187971954], [0.012589999999999999, 0.8552179651459005], [0.015849999999999993, 0.8393983463693941], [0.019949999999999996, 0.8175950811077918], [0.025119999999999996, 0.7885142367189286], [0.031619999999999995, 0.7511719623982205], [0.03980999999999999, 0.7048155041157375], [0.050120000000000005, 0.6494470662352665], [0.0631, 0.5858739781466327], [0.07943000000000001, 0.5158907079739452], [0.10000000000000002, 0.442018819148436], [0.12589000000000003, 0.36750731796337976], [0.15849, 0.29564905736299263], [0.19952999999999999, 0.22943491628776147], [0.25119, 0.17112522467226565], [0.31622999999999996, 0.12209349655261881], [0.39811, 0.08286467438011613], [0.50119, 0.05316832741715294], [0.63096, 0.032049673508140586], [0.79433, 0.018044720203788778], [1.0, 0.009440885205739047], [1.25893, 0.0045700927059435514], [1.58489, 0.0020395856568520276], [1.99526, 8.366394250357567E-4], [2.51189, 3.146679046691636E-4], [3.16228, 1.0830677271689293E-4], [3.98107, 3.4068621820093625E-5], [5.01187, 9.78689386110787E-6], [6.309570000000001, 2.5678191528655248E-6], [7.943279999999999, 6.159326528809572E-7], [10.000000000000002, 1.353319265540165E-7]]
# testDataWBackground = [[1.0000000000000009E-4, 0.892095907157327], [1.299999999999999E-4, 0.8920517908307761], [1.6E-4, 0.8919927248069934], [1.9999999999999985E-4, 0.8918960105345405], [2.5E-4, 0.8917557696719196], [3.200000000000001E-4, 0.8915411181683467], [4.000000000000001E-4, 0.8912894962078954], [5.000000000000001E-4, 0.8909845718680962], [6.299999999999998E-4, 0.8906189700043193], [7.899999999999998E-4, 0.8902214358187908], [0.0010000000000000002, 0.8897766061953676], [0.0012599999999999996, 0.8893172148760466], [0.0015799999999999998, 0.8888431224867387], [0.0020000000000000005, 0.8883029057835177], [0.0025100000000000005, 0.8876844609194698], [0.00316, 0.8868493588267408], [0.003979999999999999, 0.8856048259956477], [0.005009999999999998, 0.8836377984460273], [0.006310000000000001, 0.8804693479690164], [0.007940000000000003, 0.8754891085990175], [0.010000000000000004, 0.8678479217225862], [0.012589999999999999, 0.8565987654872355], [0.015849999999999993, 0.8406058009257011], [0.019949999999999996, 0.8186548514340956], [0.025119999999999996, 0.7894425583221218], [0.031619999999999995, 0.7519774037715927], [0.03980999999999999, 0.7055008084237155], [0.050120000000000005, 0.6500131466687625], [0.0631, 0.5863235250899914], [0.07943000000000001, 0.5162310239212963], [0.10000000000000002, 0.44226252485926065], [0.12589000000000003, 0.3676714810868609], [0.15849, 0.2957525942422501], [0.19952999999999999, 0.22949586707560465], [0.25119, 0.17115864578202833], [0.31622999999999996, 0.12211054025224188], [0.39811, 0.08287275108763259], [0.50119, 0.05317188208087564], [0.63096, 0.032051126127647045], [0.79433, 0.018045271390301654], [1.0, 0.009441079425409393], [1.25893, 0.004570156263786873], [1.58489, 0.0020396049747557488], [1.99526, 8.36644877561965E-4], [2.51189, 3.1466933381951723E-4], [3.16228, 1.0830712065434955E-4], [3.98107, 3.406870054689648E-5], [5.01187, 9.7869104276338E-6], [6.309570000000001, 2.567822394161645E-6], [7.943279999999999, 6.159332409660934E-7], [10.000000000000002, 1.3533202447568726E-7]]
# plotHazardCurve(testDataWBackground, 50, 'Wellington PGA Hazard Curve', 'SW52ZXJzaW9uU29sdXRpb246NTg3OS4wb2N4aWU=','foo.png')
